define("block_deft/manage",["exports","core_form/modalform","core/templates","core/log","core/str"],(function(_exports,_modalform,_templates,_log,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * Manage task user interface handlers
   *
   * @package    block_deft
   * @module     block_deft/manage
   * @copyright  2022 Daniel Thies <dethies@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */var contextid;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=_interopRequireDefault(_modalform),_templates=_interopRequireDefault(_templates),_log=_interopRequireDefault(_log);var submitForm=function(e){_log.default.debug("Form submitted"),_log.default.debug(e.detail),e.detail&&e.detail.html&&_templates.default.replaceNodeContents(document.querySelector(".tasks"),e.detail.html)},handleSubmit=function(e){if(e.target.matches("form")){var title,formdata=new FormData(e.target),component=e.target.closest("[data-component]")&&e.target.closest("[data-component]").getAttribute("data-component")||"block_deft",id=formdata.get("id"),type=formdata.get("type")||e.submitter.value,action="action"===e.submitter.name&&e.submitter.value;switch(e.preventDefault(),e.stopPropagation(),"delete"!==action&&"move"!==action||(type=action),action){case"delete":title=(0,_str.get_string)("confirm","core");break;case"move":title=(0,_str.get_string)("move","core");break;case"status":title=(0,_str.get_string)("changestatus","block_deft");break;default:title=(0,_str.get_string)("edit"+type,"block_deft")}_log.default.debug("Create "+type);var modalForm=new _modalform.default({formClass:component+"\\form\\"+("status"===action?"status_":"edit_")+type,args:{contextid:contextid,id:id},modalConfig:{title:title}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,submitForm),modalForm.show()}};_exports.init=function(id){contextid=id,document.removeEventListener("submit",handleSubmit),document.addEventListener("submit",handleSubmit)}}));

//# sourceMappingURL=manage.min.js.map