{"version":3,"file":"choose.min.js","sources":["../src/choose.js"],"sourcesContent":["/*\n * Handle for change for choice seletion\n *\n * @package    block_deft\n * @module     block_deft/choose\n * @copyright  2022 Daniel Thies <dethies@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Fragment from 'core/fragment';\nimport Notification from 'core/notification';\n\nvar contextid;\n\n/**\n * Handle selection change\n *\n * @param {Event} e Change event\n */\nconst handleChange = (e) => {\n    let form = e.target.closest('.deft-choice-selector form');\n    if (form) {\n        let formdata = new FormData(form),\n            id = formdata.get('id'),\n            option = formdata.get('option');\n        e.stopPropagation();\n        e.preventDefault();\n        Fragment.loadFragment(\n            'block_deft',\n            'choose',\n            contextid,\n            {\n                id: id,\n                option: option\n            }\n        ).fail(Notification.exception);\n        document.activeElement.blur();\n    }\n};\n\n/**\n * Initialize listeners\n *\n * @param {int} id Context id of content bank\n */\nexport const init = (id) => {\n    'use strict';\n\n    contextid = id;\n\n    document.removeEventListener('change', handleChange);\n    document.addEventListener('change', handleChange);\n};\n"],"names":["contextid","handleChange","e","form","target","closest","formdata","FormData","id","get","option","stopPropagation","preventDefault","loadFragment","fail","Notification","exception","document","activeElement","blur","removeEventListener","addEventListener"],"mappings":";;;;;;;;SAYIA,2LAOEC,aAAe,SAACC,OACdC,KAAOD,EAAEE,OAAOC,QAAQ,iCACxBF,KAAM,KACFG,SAAW,IAAIC,SAASJ,MACxBK,GAAKF,SAASG,IAAI,MAClBC,OAASJ,SAASG,IAAI,UAC1BP,EAAES,kBACFT,EAAEU,mCACOC,aACL,aACA,SACAb,UACA,CACIQ,GAAIA,GACJE,OAAQA,SAEdI,KAAKC,sBAAaC,WACpBC,SAASC,cAAcC,uBASX,SAACX,IAGjBR,UAAYQ,GAEZS,SAASG,oBAAoB,SAAUnB,cACvCgB,SAASI,iBAAiB,SAAUpB"}